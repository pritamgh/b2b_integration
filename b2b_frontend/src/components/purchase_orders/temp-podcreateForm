import React, { Component } from 'react';
import cookie from 'react-cookies';
import Input from '@material-ui/core/Input';
import Button from '@material-ui/core/Button';
import axios from 'axios';


class Form extends Component {

    constructor(props) {

        super(props);

        this.state = {
            order_number: '',
            // "order_type": "",
            // "payment_term": "",
            // "customer": "",
            // "supplier": "",
            buyer_name: '',
            // "order_date": "",
            // "currency": "",
            // "freight_term": "",
            // "ship_to_site": "",
            ship_from_site: '',
        };

        //his.csrfToken = cookie.load('csrftoken');

        this.handleSubmit = this.handleSubmit.bind(this);
        this.handleChangeOrderNum = this.handleChangeOrderNum.bind(this);
        this.handleChangeBuyerName = this.handleChangeBuyerName.bind(this);
        this.handleChangeShipFromSite = this.handleChangeShipFromSite.bind(this);

    }


    handleChangeOrderNum = event => {
        this.setState({order_number: event.target.value});
    };
    handleChangeBuyerName = event => {
        this.setState({buyer_name: event.target.value});
    };
    handleChangeShipFromSite = event => {
        this.setState({ship_from_site: event.target.value});
    };

    handleSubmit = event => {
        event.preventDefault();

        const endpoint = 'http://127.0.0.1:8000/api/purchase-orders/create/';
        const csrfToken = cookie.load('csrftoken');
        
        let form_data = {
            //name: this.state.name
            order_number: this.state.order_number,
            // "order_type": this.state.order_type,
            // "payment_term": this.state.payment_term,
            // "customer": this.state.customer,
            // "supplier": this.state.supplier,
            buyer_name: this.state.buyer_name,
            // "order_date": this.state.date,
            // "currency": this.state.currency,
            // "freight_term": this.state.freight_term,
            // "ship_to_site": this.state.sts,
            ship_from_site: this.state.ship_from_site,
        };

        console.log({form_data});

        axios.post(endpoint, {'X-CSRFTOKEN': csrfToken}, { form_data } )
        .then(res => {
            console.log(res);
            console.log(res.data);
            console.log({form_data});
        })
        .catch(error => {
            console.log(error.response);
        });
    }

    render() {
        return (
          <form onSubmit={this.handleSubmit}>
            <div>
                <Input type='text' name='order_number' placeholder='enter order number' 
                 value={this.state.value} onChange={this.handleChangeOrderNum} />
                <Input type='text' name='buyer_name' placeholder='enter buyer name' 
                 value={this.state.value} onChange={this.handleChangeBuyerName} />
                <Input type='text' name='ship_from_site' placeholder='enter ship from site'
                 value={this.state.value} onChange={this.handleChangeShipFromSite} />                 
            </div>
            <Button type="submit" variant="contained" color="secondary">
                Submit
            </Button>
          </form>
        );
    }
}

export default Form;